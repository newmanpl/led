<html>
<head>
<title> led test </title>
<style>
body {
  background-color: rgb(127,127,127) !important;
  font-size: 14px;
  margin: 0px;
  padding: 0px;
  position: absolute;
  width:1280px;
  height:720px;
  left:0px;
  top: 0px;
}
button:focus
{
  background-color:#555555;
}

.buttonstyle{
  height: 40px;
  width: 320px;
  outline: none;
}

.hidebtn {
  display:none
}

</style>

</head>
<body>

<script>
function turn_light(lightX, state) {
  var logger = document.getElementById('logger');
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange=function() {
    if (xhr.readyState == 4 && xhr.status == 200) {
      change_img(lightX, xhr.responseText);
      logger.innerHTML += 'the light is turned ' + xhr.responseText + "<br>";
      } else {
//     document.getElementById("logger").innerHTML = "readystate = " + xhr.readyState;
      }
  }

  var str = "php_server.php?which_led="
  if (state == true) {
    str2 = str + lightX + "&led=on";
    xhr.open("GET",str2, true);
  }else{
    str2 = str + lightX + "&led=off";
    xhr.open("GET",str2, true);
  }
  logger.innerHTML += str2 + "<br>";
  xhr.send();
}

function change_img(id, state) {

    console.log("which id = " +id)
    var light = document.getElementById(id);
    console.log(light);
    if (state == "on") {
       light.src="images/pic_bulbon.gif";
    } else {
      light.src="images/pic_bulboff.gif";
    }
}

function changeImage(e, self ) {
  var on;
  if (self.src.match("bulbon")) {
    on = false;
   } else {
     on = true;
   }
   turn_light(self.id, on);
}
function turn_on_all_lights(on) {
  for (var i = 0; i < 3; i++) {
    turn_light(i, on);
  }
}
</script>

<form method="" name="lightform1" onsubmit="return false">
<div>
<input type="hidden" name="led_cmd" value="1 off">
<input type="hidden" name="led_cmd" value="1 on">
<img id='light1' src="images/pic_bulboff.gif" border="0" onclick="changeImage(event,this)" width="50" height="70"">
</div>
</form>
<br>
<form method="" name="lightform2" >
<div>
<input type="hidden" name="led_cmd" value="2 off">
<input type="hidden" name="led_cmd" value="2 on">
<img id='light2' src="images/pic_bulboff.gif" border="0" onclick="changeImage(event, this)" width="50" height="70"">
</div>
</form>
<br>
<form method="" name="lightform3" action="">
<div>
<input type="hidden" name="led_cmd" value="3 off">
<input type="hidden" name="led_cmd" value="3 on">
<img id='light3' src="images/pic_bulboff.gif" border="0" onclick="changeImage(event, this)" width="50" height="70"">
</div>
</form>

<form method="" name="lightformall" action="">
<div>
<input type="button" name="led_cmd" onclick="turn_on_all_lights(false)" value="OFF">
<input type="button" name="led_cmd" onclick="turn_on_all_lights(true)" value="ON">
</div>
</form>

<br><br><br><br><br>
 <button class="buttonstyle" type="button" onclick="window.location.reload()">Reload Window</button><br>
<div id="logger" style="position:absolute;left: 500px;top:50px "> </div>

</body>

</html>
